{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"C:/Users/tarasenko_ag/Desktop/blog/MyBlog/frontNextJs/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:/Users/tarasenko_ag/Desktop/blog/MyBlog/frontNextJs/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\tarasenko_ag\\\\Desktop\\\\blog\\\\MyBlog\\\\frontNextJs\\\\pages\\\\snippets\\\\index.js\",\n    _s = $RefreshSig$(),\n    _this2 = this;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport Layout from '../../components/Layout.jsx'; //! REMOVE THIS LINE LATER\n\nprocess.env['NODE_TLS_REJECT_UNAUTHORIZED'] = 0; // ###############################################################\n// ###############################################################\n\nvar ACTIONS = {\n  ADD_FILTER: 'add',\n  REMOVE_FILTER: 'remove',\n  TEST: 'test',\n  RESET: 'reset'\n};\n\nfunction reducer(content, action) {\n  var initState = content.allSnippets; //all 8 items\n\n  console.log(\"-- Reducer, CONTENT CURRENT --\", content.snippets);\n\n  switch (action.type) {\n    case ACTIONS.ADD_FILTER:\n      {\n        console.log(\"-- Reducer, ADD --\");\n        var updatedFilter = content.filter.map(function (item) {\n          return item.tag === action.payload.tag ? _objectSpread(_objectSpread({}, item), {}, {\n            isSelected: true\n          }) : _objectSpread({}, item);\n        });\n        var updatedSnippets = filterSnippets();\n        return _objectSpread(_objectSpread({}, content), {}, {\n          filter: updatedFilter,\n          snippets: updatedSnippets\n        });\n      }\n\n    case ACTIONS.REMOVE_FILTER:\n      {\n        console.log(\"-- Reducer, REMOVE --\");\n\n        var _updatedFilter = content.filter.map(function (item) {\n          return item.tag === action.payload.tag ? _objectSpread(_objectSpread({}, item), {}, {\n            isSelected: false\n          }) : _objectSpread({}, item);\n        });\n\n        var _updatedSnippets = filterSnippets();\n\n        return _objectSpread(_objectSpread({}, content), {}, {\n          filter: _updatedFilter,\n          snippets: _updatedSnippets\n        });\n      }\n\n    case ACTIONS.TEST:\n      {\n        var temp = filterSnippets();\n        return _objectSpread(_objectSpread({}, content), {}, {\n          snippets: temp\n        });\n      }\n\n    case ACTIONS.RESET:\n      {\n        return _objectSpread(_objectSpread({}, content), {}, {\n          snippets: initState,\n          filter: content.defaultFilter\n        });\n      }\n  }\n\n  function filterSnippets() {\n    var activeTags = content.filter.reduce(function (arr, item) {\n      return item.isSelected ? [].concat(_toConsumableArray(arr), [item.tag]) : arr;\n    }, []);\n    var newSnippets = initState.reduce(function (arr, snippet) {\n      activeTags.forEach(function (tag) {\n        if (snippet.tags.includes(tag) && !arr.some(function (item) {\n          return item.slug === snippet.slug;\n        })) {\n          arr.push(snippet);\n        }\n      });\n      return arr;\n    }, []);\n    return newSnippets;\n  }\n} // ###############################################################npm\n// ###############################################################\n//! AllTags \\ allSnippets - probably not needed...\n\n\nfunction Index(_ref) {\n  _s();\n\n  var _this = this;\n\n  var snippets = _ref.snippets,\n      filter = _ref.filter,\n      allTags = _ref.allTags,\n      defaultFilter = _ref.defaultFilter;\n\n  var _useReducer = useReducer(reducer, {\n    snippets: snippets,\n    filter: filter,\n    allTags: allTags,\n    defaultFilter: defaultFilter,\n    allSnippets: _toConsumableArray(snippets)\n  }),\n      content = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  console.group('State');\n  console.log(\"Snippets: \", snippets.length, snippets);\n  console.log(\"Filter: \", filter);\n  console.groupEnd();\n\n  function handleFiltering(e) {\n    if (e.target.classList.contains(\"selected\")) {\n      console.log(\"Disabling filter..\");\n      dispatch({\n        type: ACTIONS.REMOVE_FILTER,\n        payload: {\n          tag: e.target.value\n        }\n      });\n      return;\n    } else {\n      console.log(\"Adding new filter\");\n      dispatch({\n        type: ACTIONS.ADD_FILTER,\n        payload: {\n          tag: e.target.value\n        }\n      });\n      return;\n    }\n\n    ;\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-column mb-6 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-64\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Nay whatever way delicate passed of avoid might sing whatever all window concealed. Dissuade whole many age mistress late sentiments held doubt scarcely against invitation answer enable. Visited engage steepest shall beyond subject civilly performed concluded offence farther.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags-filter flex flex-row mt-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"tag px-2 py-1 border mr-2\",\n                onClick: function onClick() {\n                  return dispatch({\n                    type: ACTIONS.RESET\n                  });\n                },\n                children: \"RESET\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"tag px-2 py-1 border\",\n                onClick: function onClick() {\n                  return dispatch({\n                    type: ACTIONS.TEST\n                  });\n                },\n                children: \"TEST\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mx-5\",\n                children: \" --- \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this), content.filter && content.filter.map(function (filter, index) {\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"tag px-2 py-1 border mr-2 \".concat(filter.isSelected ? 'selected' : ''),\n                  disabled: !filter.isActive,\n                  onClick: handleFiltering,\n                  value: filter.tag,\n                  children: filter.tag\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 94\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-8 flex flex-row flex-wrap items-stretch\",\n            children: content.snippets && content.snippets.map(function (snippet, index) {\n              return /*#__PURE__*/_jsxDEV(Snippet, {\n                snippet: snippet,\n                tags: snippet.tags\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 37\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 13\n  }, this);\n}\n\n_s(Index, \"AySTO3hrFnb8k/t2+qxelkHXsE4=\");\n\n_c = Index;\n\nvar Snippet = function Snippet(props) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 flex-shring-0 w-1/4 flex\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-200 p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"pb-2 text-lg leading-5\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"snippets/\".concat(props.snippet.slug),\n            children: props.snippet.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 56\n          }, _this2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }, _this2), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm leading-4\",\n          children: props.snippet.excerpt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }, _this2), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"snippet-tags flex flex-row pt-2 flex-wrap\",\n          children: props.tags.map(function (tag, index) {\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"snippet-tag text-sm flex-shrink-0\",\n              children: tag\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 53\n            }, _this2);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, _this2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, _this2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, _this2)\n  }, void 0, false);\n};\n\n_c2 = Snippet;\nexport var __N_SSG = true;\nexport default Index;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Index\");\n$RefreshReg$(_c2, \"Snippet\");","map":{"version":3,"sources":["C:/Users/tarasenko_ag/Desktop/blog/MyBlog/frontNextJs/pages/snippets/index.js"],"names":["React","useEffect","useReducer","useState","Layout","process","env","ACTIONS","ADD_FILTER","REMOVE_FILTER","TEST","RESET","reducer","content","action","initState","allSnippets","console","log","snippets","type","updatedFilter","filter","map","item","tag","payload","isSelected","updatedSnippets","filterSnippets","temp","defaultFilter","activeTags","reduce","arr","newSnippets","snippet","forEach","tags","includes","some","slug","push","Index","allTags","dispatch","group","length","groupEnd","handleFiltering","e","target","classList","contains","value","index","isActive","Snippet","props","title","excerpt"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer, useState } from \"react\";\r\nimport { ApolloClient, InMemoryCache, gql } from '@apollo/client';\r\nimport Layout from '../../components/Layout.jsx';\r\n\r\n\r\n//! REMOVE THIS LINE LATER\r\nprocess.env['NODE_TLS_REJECT_UNAUTHORIZED'] = 0;\r\n\r\n// ###############################################################\r\n// ###############################################################\r\nconst client = new ApolloClient({\r\n    uri: process.env.REACT_APP_GRAPH_API,\r\n    cache: new InMemoryCache()\r\n});\r\n\r\n// ###############################################################\r\n// ###############################################################\r\n// This function gets called at build time\r\nexport async function getStaticProps() {\r\n    //destructure response to data obj\r\n    const { data: {snippets} } = await client.query({\r\n        query: gql`{ \r\n            snippets {\r\n                title\r\n                slug\r\n                tags\r\n                excerpt\r\n                createdAt\r\n              } \r\n        }`\r\n    });\r\n\r\n    //collecting all possible tags for snippets to pass them as default value\r\n    let tagsArray = []\r\n    snippets.forEach(snippet => snippet.tags.forEach(tag => !tagsArray.includes(tag) && tagsArray.push(tag)));\r\n\r\n    let newArr = [];\r\n    tagsArray.forEach(item => newArr.push({tag: item, isActive: true, isSelected: false}));\r\n    const initialContent = { snippets: snippets, filter: newArr, allTags: tagsArray, defaultFilter: newArr }\r\n\r\n    return { props: initialContent};\r\n  }\r\n\r\n\r\nconst ACTIONS = {\r\n    ADD_FILTER: 'add',\r\n    REMOVE_FILTER: 'remove',\r\n    TEST: 'test',\r\n    RESET: 'reset'\r\n  }\r\n\r\nfunction reducer(content, action) {\r\n    const initState = content.allSnippets; //all 8 items\r\n    console.log(\"-- Reducer, CONTENT CURRENT --\", content.snippets)\r\n    \r\n    switch(action.type) {\r\n        case ACTIONS.ADD_FILTER: {\r\n            console.log(\"-- Reducer, ADD --\")\r\n            const updatedFilter = content.filter.map( item => item.tag === action.payload.tag ? {...item, isSelected: true} : {...item});\r\n            const updatedSnippets = filterSnippets();\r\n\r\n            return {...content, filter: updatedFilter, snippets: updatedSnippets}\r\n        }\r\n\r\n        case ACTIONS.REMOVE_FILTER: {\r\n            console.log(\"-- Reducer, REMOVE --\")\r\n            const updatedFilter = content.filter.map( item => item.tag === action.payload.tag ? {...item, isSelected: false} : {...item});\r\n            const updatedSnippets = filterSnippets();\r\n\r\n            return {...content, filter: updatedFilter, snippets: updatedSnippets}\r\n        }\r\n\r\n        case ACTIONS.TEST: {\r\n            const temp = filterSnippets();\r\n            return {...content, snippets: temp}\r\n        }\r\n\r\n        case ACTIONS.RESET: {\r\n            return {...content, snippets: initState, filter: content.defaultFilter}\r\n        }\r\n    }\r\n\r\n    function filterSnippets() {\r\n        const activeTags = content.filter.reduce( (arr, item) => item.isSelected ? [...arr, item.tag] : arr, [])\r\n\r\n        const newSnippets = initState.reduce( (arr, snippet) => { \r\n            activeTags.forEach( tag => {\r\n                if(snippet.tags.includes(tag) && (!arr.some(item => item.slug === snippet.slug))) {\r\n                    arr.push(snippet)\r\n                }\r\n            })\r\n            return arr;\r\n        }, [])\r\n\r\n        return newSnippets;\r\n    }\r\n}\r\n\r\n// ###############################################################npm\r\n// ###############################################################\r\n//! AllTags \\ allSnippets - probably not needed...\r\n\r\nfunction Index( {snippets, filter, allTags, defaultFilter} ) {\r\n    const [content, dispatch] = useReducer(reducer, {snippets, filter, allTags, defaultFilter, allSnippets: [...snippets]})\r\n\r\n    console.group('State');\r\n    console.log(\"Snippets: \", snippets.length, snippets);\r\n    console.log(\"Filter: \", filter);\r\n    console.groupEnd();\r\n\r\n    function handleFiltering(e) {\r\n\r\n        if(e.target.classList.contains(\"selected\")) {\r\n            console.log(\"Disabling filter..\");\r\n            dispatch({type: ACTIONS.REMOVE_FILTER, payload: {tag: e.target.value}});\r\n            return\r\n        } else {\r\n            console.log(\"Adding new filter\")\r\n            dispatch({type: ACTIONS.ADD_FILTER, payload: {tag: e.target.value}})\r\n            return\r\n        };\r\n    }\r\n   \r\n    return  <React.Fragment>\r\n                <Layout >\r\n                    <React.Fragment>\r\n                    <div className=\"flex flex-column mb-6 flex flex-col\">\r\n                        <div className=\"px-64\">\r\n                            <p>Nay whatever way delicate passed of avoid might sing whatever all window concealed. Dissuade whole many age mistress late sentiments held doubt scarcely against invitation answer enable. Visited engage steepest shall beyond subject civilly performed concluded offence farther.</p>\r\n                            <div className=\"tags-filter flex flex-row mt-6\">\r\n                                <button className=\"tag px-2 py-1 border mr-2\" onClick={ () => dispatch({type: ACTIONS.RESET})} >RESET</button>\r\n                                <button className=\"tag px-2 py-1 border\" onClick={ () => dispatch({type: ACTIONS.TEST})} >TEST</button>\r\n                                <p className=\"mx-5\"> --- </p>\r\n                                {/* <p>Filters</p> */}\r\n                                {/* <button className=\"tag px-2 py-1 border mr-2\" onClick={sortSnippets} value={filter[prop]}> */}\r\n                                {\r\n                                    content.filter && content.filter.map( (filter, index) => <button className={`tag px-2 py-1 border mr-2 ${filter.isSelected ? 'selected' : ''}`}\r\n                                        disabled={!filter.isActive} key={index} onClick={handleFiltering} value={filter.tag} >\r\n                                            {filter.tag}\r\n                                        </button>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"pt-8 flex flex-row flex-wrap items-stretch\">\r\n                            {/* <p>Snippet</p><p>Snippet</p><p>Snippet</p> */}\r\n                            {\r\n                                content.snippets && content.snippets.map( (snippet, index) => \r\n                                    <Snippet snippet={snippet} key={index} tags={snippet.tags} />\r\n                                )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    </React.Fragment>\r\n                </Layout>\r\n            </React.Fragment>\r\n}\r\n\r\nconst Snippet = (props) => {\r\n    return <>\r\n        <div className=\"p-2 flex-shring-0 w-1/4 flex\" >\r\n            <div className=\"bg-gray-200 p-3\">\r\n                <h2 className=\"pb-2 text-lg leading-5\"><a href={`snippets/${props.snippet.slug}`}>{props.snippet.title}</a></h2>\r\n                <p className=\"text-sm leading-4\">{props.snippet.excerpt}</p>\r\n                <span className=\"snippet-tags flex flex-row pt-2 flex-wrap\">\r\n                    {props.tags.map((tag, index) => <p key={index} className=\"snippet-tag text-sm flex-shrink-0\">{tag}</p>)}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </>\r\n}\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}