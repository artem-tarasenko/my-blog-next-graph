{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\tarasenko_ag\\\\Desktop\\\\blog\\\\MyBlog\\\\frontNextJs\\\\pages\\\\snippets\\\\index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { ApolloClient, InMemoryCache, gql } from '@apollo/client';\nimport Layout from '../../components/Layout.jsx'; // ###############################################################\n// ###############################################################\n\nconst client = new ApolloClient({\n  uri: process.env.REACT_APP_GRAPH_API,\n  cache: new InMemoryCache()\n}); // ###############################################################\n// ###############################################################\n// This function gets called at build time\n\nexport async function getStaticProps() {\n  //destructure response to data obj\n  const {\n    data: {\n      snippets\n    }\n  } = await client.query({\n    query: gql`{ \n            snippets {\n                title\n                slug\n                tags\n                excerpt\n                createdAt\n              } \n        }`\n  });\n  let tagsArray = [];\n  snippets.forEach(snippet => snippet.tags.forEach(tag => !tagsArray.includes(tag) && tagsArray.push(tag)));\n  return {\n    props: {\n      snippets: snippets,\n      tags: tagsArray\n    }\n  };\n} // ###############################################################\n// ###############################################################\n\nfunction Index({\n  snippets,\n  tags\n}) {\n  const {\n    0: snippetsArray,\n    1: setSnippetsArray\n  } = useState(snippets);\n  const {\n    0: filter,\n    1: setFilter\n  } = useState();\n  console.log(\"SNIPPETS PROPS DATA > \", snippets);\n  console.log(\"TAGS PROPS DATA > \", tags); //Collect all tags to an array\n\n  let tagsArray = [];\n  console.log(\"Def state\", snippetsArray);\n  console.log(\"Def filter\", filter);\n  snippetsArray.forEach(snippet => snippet.tags.forEach(tag => !tagsArray.includes(tag) && tagsArray.push(tag)));\n  useEffect(() => {\n    setFilter(tagsArray);\n  }, []); //Sort entrees by selected tag\n\n  function sortByTag(e) {\n    console.log(\"On Click # Snippets pressed\", e.target.value);\n    console.log(\"On Click # Snippets arr\", snippetsArray);\n    console.log(\"On click # event\", e.target);\n    e.target.classList.toggle(\"selected\");\n    const filteredArray = snippetsArray.filter(item => item.tags.includes(e.target.value));\n    console.log(\"On click # filtered array of snippets: \", filteredArray);\n    setSnippetsArray(filteredArray);\n  }\n\n  function sortSnippets(filter) {}\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-column mb-6 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-64\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Nay whatever way delicate passed of avoid might sing whatever all window concealed. Dissuade whole many age mistress late sentiments held doubt scarcely against invitation answer enable. Visited engage steepest shall beyond subject civilly performed concluded offence farther.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags-filter flex flex-row mt-6\",\n              children: tagsArray.map(tag => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"tag px-2 py-1 border mr-2\",\n                onClick: sortByTag,\n                value: tag,\n                children: tag\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-8 flex flex-row flex-wrap items-stretch\",\n            children: snippetsArray.map(snippet => /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-2 flex-shring-0 w-1/4 flex\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-gray-200 p-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"pb-2 text-lg leading-5\",\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: `snippets/${snippet.slug}`,\n                      children: snippet.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 84\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm leading-4\",\n                    children: snippet.excerpt\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"snippet-tags flex flex-row pt-2 flex-wrap\",\n                    children: snippet.tags.map(tag => /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"snippet-tag text-sm flex-shrink-0\",\n                      children: tag\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 74\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 37\n              }, this)\n            }, void 0, false))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 13\n  }, this);\n}\n\nexport default Index;","map":{"version":3,"sources":["C:/Users/tarasenko_ag/Desktop/blog/MyBlog/frontNextJs/pages/snippets/index.js"],"names":["React","useEffect","useState","ApolloClient","InMemoryCache","gql","Layout","client","uri","process","env","REACT_APP_GRAPH_API","cache","getStaticProps","data","snippets","query","tagsArray","forEach","snippet","tags","tag","includes","push","props","Index","snippetsArray","setSnippetsArray","filter","setFilter","console","log","sortByTag","e","target","value","classList","toggle","filteredArray","item","sortSnippets","map","slug","title","excerpt"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,YAAT,EAAuBC,aAAvB,EAAsCC,GAAtC,QAAiD,gBAAjD;AAEA,OAAOC,MAAP,MAAmB,6BAAnB,C,CAIA;AACA;;AACA,MAAMC,MAAM,GAAG,IAAIJ,YAAJ,CAAiB;AAC5BK,EAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADW;AAE5BC,EAAAA,KAAK,EAAE,IAAIR,aAAJ;AAFqB,CAAjB,CAAf,C,CAKA;AACA;AACA;;AACA,OAAO,eAAeS,cAAf,GAAgC;AACnC;AACA,QAAM;AAAEC,IAAAA,IAAI,EAAE;AAACC,MAAAA;AAAD;AAAR,MAAuB,MAAMR,MAAM,CAACS,KAAP,CAAa;AAC5CA,IAAAA,KAAK,EAAEX,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAToD,GAAb,CAAnC;AAYA,MAAIY,SAAS,GAAG,EAAhB;AACAF,EAAAA,QAAQ,CAACG,OAAT,CAAiBC,OAAO,IAAIA,OAAO,CAACC,IAAR,CAAaF,OAAb,CAAqBG,GAAG,IAAI,CAACJ,SAAS,CAACK,QAAV,CAAmBD,GAAnB,CAAD,IAA4BJ,SAAS,CAACM,IAAV,CAAeF,GAAf,CAAxD,CAA5B;AAEA,SAAO;AAAEG,IAAAA,KAAK,EAAE;AAACT,MAAAA,QAAQ,EAAEA,QAAX;AAAqBK,MAAAA,IAAI,EAAEH;AAA3B;AAAT,GAAP;AACD,C,CAKH;AACA;;AACA,SAASQ,KAAT,CAAgB;AAACV,EAAAA,QAAD;AAAWK,EAAAA;AAAX,CAAhB,EAAmC;AAC/B,QAAM;AAAA,OAACM,aAAD;AAAA,OAAgBC;AAAhB,MAAoCzB,QAAQ,CAACa,QAAD,CAAlD;AACA,QAAM;AAAA,OAACa,MAAD;AAAA,OAASC;AAAT,MAAsB3B,QAAQ,EAApC;AACA4B,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsChB,QAAtC;AACAe,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCX,IAAlC,EAJ+B,CAM/B;;AACA,MAAIH,SAAS,GAAG,EAAhB;AACAa,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBL,aAAzB;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BH,MAA1B;AAEAF,EAAAA,aAAa,CAACR,OAAd,CAAsBC,OAAO,IAAIA,OAAO,CAACC,IAAR,CAAaF,OAAb,CAAqBG,GAAG,IAAI,CAACJ,SAAS,CAACK,QAAV,CAAmBD,GAAnB,CAAD,IAA4BJ,SAAS,CAACM,IAAV,CAAeF,GAAf,CAAxD,CAAjC;AAEApB,EAAAA,SAAS,CAAC,MAAM;AAEZ4B,IAAAA,SAAS,CAACZ,SAAD,CAAT;AACH,GAHQ,EAGN,EAHM,CAAT,CAb+B,CAmB/B;;AACA,WAASe,SAAT,CAAmBC,CAAnB,EAAsB;AAClBH,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CE,CAAC,CAACC,MAAF,CAASC,KAApD;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCL,aAAvC;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,CAAC,CAACC,MAAlC;AAEAD,IAAAA,CAAC,CAACC,MAAF,CAASE,SAAT,CAAmBC,MAAnB,CAA0B,UAA1B;AACA,UAAMC,aAAa,GAAGZ,aAAa,CAACE,MAAd,CAAqBW,IAAI,IAAIA,IAAI,CAACnB,IAAL,CAAUE,QAAV,CAAmBW,CAAC,CAACC,MAAF,CAASC,KAA5B,CAA7B,CAAtB;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ,EAAuDO,aAAvD;AACAX,IAAAA,gBAAgB,CAACW,aAAD,CAAhB;AACH;;AAED,WAASE,YAAT,CAAsBZ,MAAtB,EAA8B,CAE7B;;AAED,sBAAQ,QAAC,KAAD,CAAO,QAAP;AAAA,2BACI,QAAC,MAAD;AAAA,6BACI,QAAC,KAAD,CAAO,QAAP;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,qCAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,OAAf;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAK,cAAA,SAAS,EAAC,gCAAf;AAAA,wBACKX,SAAS,CAACwB,GAAV,CAAepB,GAAG,iBACf;AAAQ,gBAAA,SAAS,EAAC,2BAAlB;AAA8C,gBAAA,OAAO,EAAEW,SAAvD;AAAkE,gBAAA,KAAK,EAAEX,GAAzE;AAAA,0BAA+EA;AAA/E;AAAA;AAAA;AAAA;AAAA,sBADH;AADL;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eASI;AAAK,YAAA,SAAS,EAAC,4CAAf;AAAA,sBACKK,aAAa,CAACe,GAAd,CAAkBtB,OAAO,iBAAI;AAAA,qCAC1B;AAAK,gBAAA,SAAS,EAAC,8BAAf;AAAA,uCACI;AAAK,kBAAA,SAAS,EAAC,iBAAf;AAAA,0CACI;AAAI,oBAAA,SAAS,EAAC,wBAAd;AAAA,2CAAuC;AAAG,sBAAA,IAAI,EAAG,YAAWA,OAAO,CAACuB,IAAK,EAAlC;AAAA,gCAAsCvB,OAAO,CAACwB;AAA9C;AAAA;AAAA;AAAA;AAAA;AAAvC;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI;AAAG,oBAAA,SAAS,EAAC,mBAAb;AAAA,8BAAkCxB,OAAO,CAACyB;AAA1C;AAAA;AAAA;AAAA;AAAA,0BAFJ,eAGI;AAAM,oBAAA,SAAS,EAAC,2CAAhB;AAAA,8BACKzB,OAAO,CAACC,IAAR,CAAaqB,GAAb,CAAiBpB,GAAG,iBAAI;AAAG,sBAAA,SAAS,EAAC,mCAAb;AAAA,gCAAkDA;AAAlD;AAAA;AAAA;AAAA;AAAA,4BAAxB;AADL;AAAA;AAAA;AAAA;AAAA,0BAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAD0B,6BAA7B;AADL;AAAA;AAAA;AAAA;AAAA,kBATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UAAR;AA8BH;;AAED,eAAeI,KAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { ApolloClient, InMemoryCache, gql } from '@apollo/client';\r\n\r\nimport Layout from '../../components/Layout.jsx';\r\n\r\n\r\n\r\n// ###############################################################\r\n// ###############################################################\r\nconst client = new ApolloClient({\r\n    uri: process.env.REACT_APP_GRAPH_API,\r\n    cache: new InMemoryCache()\r\n});\r\n\r\n// ###############################################################\r\n// ###############################################################\r\n// This function gets called at build time\r\nexport async function getStaticProps() {\r\n    //destructure response to data obj\r\n    const { data: {snippets} } = await client.query({\r\n        query: gql`{ \r\n            snippets {\r\n                title\r\n                slug\r\n                tags\r\n                excerpt\r\n                createdAt\r\n              } \r\n        }`\r\n    });\r\n\r\n    let tagsArray = []\r\n    snippets.forEach(snippet => snippet.tags.forEach(tag => !tagsArray.includes(tag) && tagsArray.push(tag)));\r\n\r\n    return { props: {snippets: snippets, tags: tagsArray} };\r\n  }\r\n\r\n\r\n\r\n\r\n// ###############################################################\r\n// ###############################################################\r\nfunction Index( {snippets, tags} ) {\r\n    const [snippetsArray, setSnippetsArray] = useState(snippets);\r\n    const [filter, setFilter] = useState()\r\n    console.log(\"SNIPPETS PROPS DATA > \", snippets);\r\n    console.log(\"TAGS PROPS DATA > \", tags);\r\n\r\n    //Collect all tags to an array\r\n    let tagsArray = []\r\n    console.log(\"Def state\", snippetsArray);\r\n    console.log(\"Def filter\", filter);\r\n\r\n    snippetsArray.forEach(snippet => snippet.tags.forEach(tag => !tagsArray.includes(tag) && tagsArray.push(tag)));\r\n    \r\n    useEffect(() => {\r\n        \r\n        setFilter(tagsArray);\r\n    }, [])\r\n\r\n\r\n    //Sort entrees by selected tag\r\n    function sortByTag(e) {\r\n        console.log(\"On Click # Snippets pressed\", e.target.value);\r\n        console.log(\"On Click # Snippets arr\", snippetsArray);\r\n        console.log(\"On click # event\", e.target);\r\n\r\n        e.target.classList.toggle(\"selected\");\r\n        const filteredArray = snippetsArray.filter(item => item.tags.includes(e.target.value));\r\n        console.log(\"On click # filtered array of snippets: \", filteredArray);\r\n        setSnippetsArray(filteredArray);\r\n    }\r\n\r\n    function sortSnippets(filter) {\r\n\r\n    }\r\n    \r\n    return  <React.Fragment>\r\n                <Layout >\r\n                    <React.Fragment>\r\n                        <div className=\"flex flex-column mb-6 flex flex-col\">\r\n                            <div className=\"px-64\">\r\n                                <p>Nay whatever way delicate passed of avoid might sing whatever all window concealed. Dissuade whole many age mistress late sentiments held doubt scarcely against invitation answer enable. Visited engage steepest shall beyond subject civilly performed concluded offence farther.</p>\r\n                                <div className=\"tags-filter flex flex-row mt-6\">\r\n                                    {tagsArray.map( tag => (\r\n                                        <button className=\"tag px-2 py-1 border mr-2\" onClick={sortByTag} value={tag}>{tag}</button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"pt-8 flex flex-row flex-wrap items-stretch\">\r\n                                {snippetsArray.map(snippet => <>\r\n                                    <div className=\"p-2 flex-shring-0 w-1/4 flex\">\r\n                                        <div className=\"bg-gray-200 p-3\">\r\n                                            <h2 className=\"pb-2 text-lg leading-5\"><a href={`snippets/${snippet.slug}`}>{snippet.title}</a></h2>\r\n                                            <p className=\"text-sm leading-4\">{snippet.excerpt}</p>\r\n                                            <span className=\"snippet-tags flex flex-row pt-2 flex-wrap\">\r\n                                                {snippet.tags.map(tag => <p className=\"snippet-tag text-sm flex-shrink-0\">{tag}</p>)}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </React.Fragment>\r\n                </Layout>\r\n            </React.Fragment>\r\n}\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}